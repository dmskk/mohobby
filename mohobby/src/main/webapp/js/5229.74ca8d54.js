"use strict";(self["webpackChunkmohobby"]=self["webpackChunkmohobby"]||[]).push([[5229],{25229:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=s(40998),o=s(64562),r=s(34145),n=s(69256),a=s(31267),c=s(43201),l=s(17808),d=function(){var t=this,e=t._self._c;return e(i.Z,[e(n.Z,{staticStyle:{"max-width":"350px"}},[e(c.Z,{staticStyle:{padding:"40px 0px 0px 0px"},attrs:{row:""}},[e(a.Z,{attrs:{xs12:""}},[e(r.Z,{attrs:{elevation:"0"}},[e("div",[e("h1",{staticStyle:{"text-align":"center"}},[t._v(" 출결 ")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.checkMember.apply(null,arguments)}}},[e(l.Z,{attrs:{label:"아이디","prepend-inner-icon":"mdi-account",color:"#2255b1"},model:{value:t.memberId,callback:function(e){t.memberId=e},expression:"memberId"}}),e(l.Z,{attrs:{color:"#2255b1","prepend-inner-icon":"mdi-lock",type:"password",label:"비밀번호"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(o.Z,{staticClass:"mb-3",attrs:{type:"submit",color:"#F9E000",depressed:"",large:"",block:""}},[t._v(" Login ")]),e("br"),e("div",{staticClass:"d-flex justify-center"},[e("a",{attrs:{id:"custom-login-btn"},on:{click:function(e){return t.kakaoLogin()}}},[e("img",{staticStyle:{height:"40px",width:"185px","margin-right":"5px"},attrs:{src:"https://www.gb.go.kr/Main/Images/ko/member/certi_kakao_login.png"}})])]),e("div",{staticClass:"d-flex justify-center"},[e("div",{attrs:{id:"naverIdLogin"}})])],1)])])],1)],1)],1)],1)},h=[],u=(s(57658),{data(){return{id:this.$route.query.id,currId:this.$route.query.currId,type:this.$route.query.type,connect:this.$route.query.connect,time:this.$route.query.time,memberId:"",password:"",loginInfo:null,email:"",token:"",now:this.$moment().format("YYYY-MM-DD HH:mm:ss"),attdType:{0:"ATTD_DATE",1:"LEAVE_DATE",2:"OUT_DATE",3:"RECORD_TYPE",4:"EXIT_DATE",5:"COMEBACK_DATE"},naverLogin:null}},mounted(){this.$store.commit("setIsLoginFalse"),this.$store.commit("logout"),this.$store.commit("setUserData",null),this.naverLogin=new window.naver.LoginWithNaverId({clientId:"qtK4gDKw7gcdHhTwYZpV",callbackUrl:"http://localhost:8080/login",isPopup:!1,loginButton:{color:"green",type:3,height:40,width:150}}),this.naverLogin.init(),this.naverLogin.getLoginStatus((t=>{const e=this;if(t){console.log(t),console.log(this.naverLogin.user);var s=this.naverLogin.user.getEmail();if("undifined"==s||null==s)return alert("이메일은 필수 정보입니다. 정보 제공을 동의해주세요."),void this.naverLogin.reprompt();e.email=s,e.checkMemberByEmail()}else console.log("callback 처리에 실패하였습니다.")}))},created(){document.querySelector("header").innerHTML="",this.checkTimeLimit()},methods:{kakaoLogin(){const t=this;window.Kakao.Auth.loginForm({scope:"profile_nickname, account_email, gender, birthday",success:function(e){window.Kakao.API.request({url:"/v2/user/me",success:e=>{const s=e.kakao_account;console.log(s),t.token=s.access_token,t.email=s.email,t.checkMemberByEmail()}})},fail:function(t){console.log(t)}})},checkMember(){if(""==this.memberId||""==this.password)this.$swal({icon:"info",title:"아이디, 비밀번호를 입력하세요."});else{const t=this;this.axios({url:"/membercheck",method:"post",data:{memberId:t.memberId,password:t.password}}).then((function(e){if(""!=e.data&&"admin"!=e.data.memberId){if(null!=e.data.delDate)return void t.$swal.fire("탈퇴한 회원입니다.");t.memberId==t.id?t.setAttdStatus():t.$swal.fire({icon:"error",title:"출석 정보가 일치하지 않습니다."}),t.memberId="",t.password=""}else t.$swal.fire({icon:"error",title:"아이디, 비밀번호가 일치하지 않습니다."})})).catch((function(t){console.log(t)}))}},checkMemberByEmail(){const t=this;this.axios({url:"/memberEmail/"+this.email,method:"get"}).then((function(e){if(""!==e.data&&e.data.constructor===Object){if(null!=e.data.delDate)return void t.$swal.fire("탈퇴한 회원입니다.");this.$router.push("/")}else t.$swal.fire({icon:"error",title:"등록되지 않은 계정입니다."})})).catch((function(t){console.log(t)}))},setAttdStatus(){let t={memberId:this.id,currId:this.currId,type:this.type,column:this.attdType[`${this.type}`],value:3==this.type?"3":this.now},e=this.time+":00",s=this.$moment(this.now).format("HH:mm");0==this.type&&e<s?(t.lateCheck=1,this.$swal("출석이 완료되었습니다!","지각이지만.. 화이팅!","success")):1==this.type?this.$swal("조퇴가 완료되었습니다!","","success"):2==this.type?this.$swal("외출이 완료되었습니다!","","success"):4==this.type?this.$swal("퇴실이 완료되었습니다!","","success"):5==this.type&&this.$swal("복귀가 완료되었습니다!","","success"),this.send(t)},send(t){this.axios.post("/class/attd",t)},checkTimeLimit(){let t=this.now,e=this.connect.substr(0,4)+"-"+this.connect.substr(4,2)+"-"+this.connect.substr(6,2)+" "+this.connect.substr(8,2)+":"+this.connect.substr(10,2)+":"+this.connect.substr(12,2),s=this.$moment(e).format("YYYY-MM-DD HH:mm:ss"),i=this.$moment(s).add(5,"m").format("YYYY-MM-DD HH:mm:ss");i>t||(document.body.innerHTML="",this.$swal("시간이 초과되었습니다!","출결QR을 재발급 받으세요.","error"))}}}),m=u,p=s(1001),g=(0,p.Z)(m,d,h,!1,null,null,null),b=g.exports},4245:function(){},34145:function(t,e,s){s(4245);var i=s(83434),o=s(88126),r=s(58860),n=s(67678);e["Z"]=(0,n.Z)(o.Z,r.Z,i.Z).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...r.Z.options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...i.Z.options.computed.classes.call(this)}},styles(){const t={...i.Z.options.computed.styles.call(this)};return this.img&&(t.background=`url("${this.img}") center center / cover no-repeat`),t}},methods:{genProgress(){const t=o.Z.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),t(e,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},31267:function(t,e,s){s(19027);var i=s(27549);e["Z"]=(0,i.Z)("flex")},43201:function(t,e,s){s(19027);var i=s(27549);e["Z"]=(0,i.Z)("layout")}}]);
//# sourceMappingURL=5229.74ca8d54.js.map