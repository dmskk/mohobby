<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.mohobby.mapper.admin.AdminUserMapper">


<!-- 각 달별로 가입한 회원 수 -->
<select id="signUpMemList" parameterType="java.util.List" resultType="integer">
select count(*) as count
from member
where 
<foreach collection="list" item="item" index="index">
<![CDATA[ reg_date >= #{item.startDate} and reg_date < #{item.endDate} ]]>
</foreach> 
</select>


<!-- 각 달별로 탈퇴한 회원 수 -->
<select id="leaveMemList" parameterType="java.util.List" resultType="integer">
select count(*) as count
from member
where 
<foreach collection="list" item="item" index="index">
<![CDATA[ del_date >= #{item.startDate} and del_date < #{item.endDate} ]]>
</foreach>
</select>


<!--  신고된 유저 목록 -->
<select id="flagUserList" resultType="com.yedam.mohobby.service.admin.FlaggingVO">
select flag_id, flag_from, flag_to, flag_code, flag_reason, admin_confirm, flag_result
from flagging
where flag_code like 'us%';
</select>

<!-- 신고된 유저 정보 업데이트 -->
<update id="updateFlagUser" parameterType="com.yedam.mohobby.service.admin.FlaggingVO">
update flagging set admin_confirm = #{adminConfirm}, flag_result = #{flagResult}
where flag_id = #{flagId}; 

</update>

</mapper>
